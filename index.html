<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>ThreadJS API Reference</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    header {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid #ccc;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      background: var(--bg);
      color: var(--text);
      z-index: 10;
    }
    header h1 {
      margin: 0;
      font-size: 1.1rem;
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }

    #theme-btn {
      cursor: pointer;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      border: 1px solid var(--text);
      background: none;
      color: var(--text);
      font-size: 0.85rem;
    }

    #redoc-container {
      height: calc(100vh - 60px);
    }

    /* Light theme vars */
    .light {
      --bg: #ffffff;
      --text: #111111;
    }

    /* Dark theme vars */
    .dark {
      --bg: #0f172a;
      --text: #e5e7eb;
    }
  </style>

  <script src="https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js"></script>
</head>

<body>
  <header>
    <h1>ThreadJS API â€” Reference</h1>
    <button id="theme-btn">Toggle Theme</button>
  </header>

  <div id="redoc-container"></div>

  <script>
    // Load saved theme or default to dark
    const savedTheme = localStorage.getItem("theme") || "dark";
    document.body.classList.add(savedTheme);

    function loadRedoc() {
      const dark = document.body.classList.contains("dark");

      Redoc.init(
        'openapi.yaml',
        {
          theme: dark
            ? {
                colors: {
                  primary: { main: '#6366f1' },
                  text: { primary: '#e5e7eb', secondary: '#9ca3af' }
                },
                typography: {
                  fontSize: '14px',
                  fontFamily: 'system-ui'
                },
                sidebar: { backgroundColor: '#020617' },
                rightPanel: { backgroundColor: '#020617' }
              }
            : {
                colors: {
                  primary: { main: '#4f46e5' },
                  text: { primary: '#111111', secondary: '#555555' }
                },
                typography: {
                  fontSize: '14px',
                  fontFamily: 'system-ui'
                },
                sidebar: { backgroundColor: '#f3f4f6' },
                rightPanel: { backgroundColor: '#ffffff' }
              }
        },
        document.getElementById('redoc-container')
      );
    }

    loadRedoc();

    // Theme toggle button
    document.getElementById("theme-btn").onclick = () => {
      const isDark = document.body.classList.contains("dark");
      document.body.classList.remove(isDark ? "dark" : "light");
      document.body.classList.add(isDark ? "light" : "dark");
      localStorage.setItem("theme", isDark ? "light" : "dark");
      loadRedoc();
    };
  </script>

</body>
</html>
